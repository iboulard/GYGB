{% extends '::layout.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/stepList.css') }}" type="text/css">        
    <link rel="stylesheet" href="{{ asset('styles/takeAStep.css') }}" type="text/css">        
    <link rel="stylesheet" href="{{ asset('styles/resourceList.css') }}" type="text/css">        
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/resourceList.js') }}" type="text/javascript"></script>
    <script src="{{ asset('js/takeAStep.js') }}" type="text/javascript"></script>
    <script src="{{ asset('js/stepList.js') }}" type="text/javascript"></script>
{% endblock %}    
    
{% block content %}
    {% include 'GYGBFrontBundle:Steps:_takeAStepMenu.html.twig' %}
    
    <span class="take-a-step-heading">Commit to taking a step and find resources to help you take it.</span>
    
    <div id="take-a-step-page-container">
        {% if commited or taken %}
            <div style="width: 100%;">
            {% if commited and taken == false %}
                <div style="font-size: 20px; float: right; margin: 0 0 10px 0;">
                        <span style="">You have committed to taking this step.</span>
                </div>
            {% elseif taken %} 
                <div style="font-size: 20px; float: right;">
                    <div style="">
                        <img style="float: left;" src="{{ asset('images/check.png') }}" />
                        <span style="float: left; padding: 10px 0 0 10px; margin: 0 0 10px 0;">You have taken this step.</span><br/>
                    </div>
                    <div>&nbsp;</div>
                </div>
            {% endif %}
                <div style="clear: both;">&nbsp;</div>
            </div>
        {% endif %}

        <div class="take-a-step-box">
            {% include "GYGBFrontBundle:StepList:_step.html.twig" with {'step' : step, 'id' : step.id, 'displayCounts' : true, 'linkStep' : false, 'first' : false, 'last' : true } %}

            <span class="description">{{ step.description|raw }}</a>
        </div>

        {% if events|length > 0 %}
            {% include "GYGBFrontBundle:EventList:_eventList.html.twig" with {'events' : events, 'id' : 'step-events', 'noEventsText' : 'No one has taken this step! Be the first.', 'linkEvents' : false } %}
        {% endif %}
            
        <div class="step-buttons-container row">
            {% if not taken %}    
                <div class="commit-to-this-step span7">
                    {% if not commited %}
                        <a class="btn large success" href="#" id="commit-to-this-step">Commit to taking this step</a>
                    {% endif %}
                </div>
                <div class="share-this-step pull-right">
                        Have you taken this step? <a class="btn large success" href="{{ path('shareAStep', {'id':step.id}) }}">Share it! &rarr;</a>
                </div>
            {% endif %}
        </div>

        {% if not commited %}
            {% include "GYGBFrontBundle:TakeAStep:_commitmentForm.html.twig" with {'step' : step, 'commitmentForm' : commitmentForm } %}            
        {% endif %}
            
        {% if not taken %}
            <h1>Need help taking this step?</h1>
        {% endif %}
        {% include "GYGBFrontBundle:Resources:_resourceList.html.twig" with {'resources' : resources, 'showSteps' : false } %}
        
    </div>
    
{% endblock content %}